<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í”„ë¡œì íŠ¸ ê³„íš ë³´ê¸° - ì¸í„°ë™í‹°ë¸Œ ëª©ì—…</title>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');

        :root {
            --bg-gray: #f4f6f8;
            --border-color: #e5e7eb;
            --primary-blue: #2563eb;
            --text-dark: #1e293b;
            --task-blue-bg: #dbeafe; --task-blue-text: #1e40af; --task-blue-border: #3b82f6;
            --task-green-bg: #dcfce7; --task-green-text: #166534; --task-green-border: #22c55e;
            --task-yellow-bg: #fef9c3; --task-yellow-text: #854d0e; --task-yellow-border: #eab308;
        }

        body {
            font-family: 'Pretendard', sans-serif;
            background-color: var(--bg-gray);
            margin: 0; padding: 25px;
            color: var(--text-dark);
            height: 100vh; display: flex; flex-direction: column;
            box-sizing: border-box;
        }

        /* --- Header --- */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .header h1 { font-size: 1.5rem; font-weight: 700; margin: 0; }
        .upload-btn {
            background-color: #1e293b; color: white; padding: 10px 20px;
            border-radius: 8px; border: none; display: flex; align-items: center;
            gap: 8px; cursor: pointer; font-weight: 600;
        }

        /* --- Layout --- */
        .main-layout { display: flex; gap: 20px; flex: 1; overflow: hidden; }

        /* --- Main Calendar Card --- */
        .content-area {
            flex: 1; background: white; border-radius: 12px;
            border: 1px solid var(--border-color); display: flex;
            flex-direction: column; overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .toolbar {
            padding: 15px 20px; display: flex; justify-content: space-between;
            align-items: center; border-bottom: 1px solid var(--border-color);
        }

        .view-switch { display: flex; background: #f1f5f9; padding: 4px; border-radius: 8px; }
        .view-switch button {
            border: none; background: none; padding: 6px 14px;
            border-radius: 6px; cursor: pointer; font-size: 0.85rem; color: #64748b;
        }
        .view-switch button.active { background: white; color: var(--text-dark); box-shadow: 0 2px 4px rgba(0,0,0,0.1); font-weight: 600; }

        .legend-wrapper { position: relative; margin-left: 10px; }
        .legend-btn { background: #f1f5f9; border: 1px solid var(--border-color); padding: 6px 12px; border-radius: 8px; cursor: pointer; font-size: 0.85rem; }
        .legend-popup {
            display: none; position: absolute; top: 40px; left: 0;
            background: white; border: 1px solid var(--border-color);
            border-radius: 10px; padding: 15px; width: 220px; z-index: 100;
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        .legend-wrapper:hover .legend-popup { display: block; }
        .legend-item { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; font-size: 0.85rem; }
        .dot { width: 12px; height: 12px; border-radius: 3px; }

        /* --- Calendar Grid --- */
        .calendar-grid {
            flex: 1; overflow: auto; display: none;
        }
        .calendar-grid.active { display: grid; }
        
        /* ì£¼ë³„ ë·° */
        .calendar-grid.week-view {
            grid-template-columns: 80px repeat(5, 1fr);
            grid-template-rows: 45px repeat(10, 80px);
        }
        
        /* ì›”ë³„ ë·° */
        .calendar-grid.month-view {
            grid-template-columns: repeat(7, 1fr);
            grid-template-rows: 45px repeat(5, 120px);
        }
        
        /* ì›”ë³„ ë·° ì¼ì • í‘œì‹œ */
        .schedule-indicator { font-size: 0.7rem; margin-top: 8px; line-height: 1.6; }
        .schedule-indicator .person { display: flex; align-items: center; gap: 4px; margin-bottom: 3px; position: relative; }
        .schedule-indicator .person-name { color: #475569; font-weight: 500; cursor: pointer; }
        .schedule-indicator .person-name:hover { color: var(--primary-blue); text-decoration: underline; }
        .schedule-indicator .task-dots { display: inline-flex; gap: 3px; margin-left: 2px; }
        
        /* ì‚¬ëŒë³„ ì—…ë¬´ íˆ´íŒ */
        .task-tooltip {
            display: none;
            position: absolute;
            left: 0;
            top: 20px;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            min-width: 180px;
            z-index: 200;
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
            font-size: 0.75rem;
            line-height: 1.5;
        }
        .person:hover .task-tooltip { display: block; }
        .task-tooltip .tooltip-title {
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-dark);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 5px;
        }
        .task-tooltip .task-item {
            display: flex;
            align-items: start;
            gap: 6px;
            margin-bottom: 5px;
            color: #475569;
        }
        .task-tooltip .task-item:last-child { margin-bottom: 0; }
        
        /* ì¼ë³„ ë·° */
        .calendar-grid.day-view {
            grid-template-columns: 80px 1fr;
            grid-template-rows: 45px repeat(10, 80px);
        }
        .cell { border-right: 1px solid #f1f5f9; border-bottom: 1px solid #f1f5f9; position: relative; overflow: hidden; }
        
        /* ì£¼ë³„/ì¼ë³„/ì›”ë³„ ë·°ëŠ” íˆ´íŒì´ ë³´ì´ë„ë¡ overflow visible */
        .week-view .cell:not(.cell-header):not(.time-label),
        .day-view .cell:not(.cell-header):not(.time-label),
        .month-view .cell[data-date] {
            overflow: visible;
        }
        .cell-header { 
            background: #fafafa; position: sticky; top: 0; z-index: 10;
            display: flex; justify-content: center; align-items: center;
            font-size: 0.85rem; font-weight: 600; color: #64748b;
        }
        .time-label { display: flex; justify-content: center; padding-top: 10px; font-size: 0.8rem; color: #94a3b8; }
        
        /* ì›”ë³„ ë·° ë‚ ì§œ ì…€ í´ë¦­ ê°€ëŠ¥ */
        .month-view .cell[data-date] { cursor: pointer; transition: 0.2s; }
        .month-view .cell[data-date]:hover { background: #f0f9ff !important; }
        .month-view .cell[data-date].selected { background: #dbeafe !important; border: 2px solid var(--primary-blue); }

        .task {
            position: absolute; left: 8px; right: 8px; top: 5px;
            border-radius: 8px; padding: 10px; font-size: 0.8rem;
            cursor: pointer; border-left: 4px solid rgba(0,0,0,0.2);
            transition: 0.2s; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            overflow: hidden;
            text-overflow: ellipsis;
            min-height: 20px;
        }
        .task:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000 !important;
            overflow: visible;
        }
        
        /* ì¼ì • ë¸”ë¡ íˆ´íŒ */
        .task-detail-tooltip {
            display: none;
            position: absolute;
            left: 50%;
            bottom: 100%;
            transform: translateX(-50%);
            margin-bottom: 8px;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            min-width: 200px;
            max-width: 300px;
            z-index: 1000;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            font-size: 0.8rem;
            line-height: 1.6;
            white-space: normal;
            pointer-events: none;
        }
        .task:hover .task-detail-tooltip { 
            display: block; 
        }
        .task-detail-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: white;
        }
        .task-detail-tooltip .tooltip-row {
            margin-bottom: 6px;
        }
        .task-detail-tooltip .tooltip-row:last-child {
            margin-bottom: 0;
        }
        .task-detail-tooltip .tooltip-label {
            font-weight: 600;
            color: #64748b;
            font-size: 0.7rem;
        }
        .task-detail-tooltip .tooltip-value {
            color: var(--text-dark);
            font-weight: 500;
        }
        .task.blue { background: var(--task-blue-bg); color: var(--task-blue-text); border-left-color: var(--task-blue-border); }
        .task.green { background: var(--task-green-bg); color: var(--task-green-text); border-left-color: var(--task-green-border); }
        .task.yellow { background: var(--task-yellow-bg); color: var(--task-yellow-text); border-left-color: var(--task-yellow-border); }
        .task.hidden { display: none !important; }

        /* --- Sidebar --- */
        .sidebar {
            width: 300px; background: white; border-radius: 12px;
            border: 1px solid var(--border-color); padding: 25px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .sidebar h3 { font-size: 1.1rem; margin-top: 0; margin-bottom: 20px; }
        .team-group { margin-bottom: 25px; }
        .team-header { display: flex; align-items: center; gap: 10px; font-weight: 700; margin-bottom: 12px; color: var(--primary-blue); font-size: 0.95rem; }
        .member-item { display: flex; align-items: center; gap: 10px; padding: 6px 0; margin-left: 15px; font-size: 0.9rem; color: #475569; }
        input[type="checkbox"] { width: 17px; height: 17px; accent-color: var(--primary-blue); cursor: pointer; }

    </style>
</head>
<body>

    <header class="header">
        <h1>í”„ë¡œì íŠ¸ ê³„íš ë³´ê¸°</h1>
        <button class="upload-btn" onclick="alert('ì—‘ì…€ ë¶„ì„ ì¤‘...')"><span>ğŸ“¤</span> ì—‘ì…€ ì—…ë¡œë“œ</button>
    </header>

    <div class="main-layout">
        <div class="content-area">
            <div class="toolbar">
                <div style="display: flex; align-items: center;">
                    <div class="view-switch">
                        <button onclick="changeView(this)">ì›” (Month)</button>
                        <button class="active" onclick="changeView(this)">ì£¼ (Week)</button>
                        <button onclick="changeView(this)">ì¼ (Day)</button>
                    </div>
                    <div class="legend-wrapper">
                        <button class="legend-btn">ğŸ¨ ë¶„ë¥˜ (Legend)</button>
                        <div class="legend-popup">
                            <h4 style="margin:0 0 10px 0;">ì—…ë¬´ ì†Œë¶„ë¥˜ ê°€ì´ë“œ</h4>
                            <div class="legend-item"><div class="dot" style="background:var(--task-blue-border)"></div> ê¸°íš (Planning)</div>
                            <div class="legend-item"><div class="dot" style="background:var(--task-green-border)"></div> ê°œë°œ (Development)</div>
                            <div class="legend-item"><div class="dot" style="background:var(--task-yellow-border)"></div> ë””ìì¸ (Design)</div>
                            <div style="margin-top:12px;padding-top:10px;border-top:1px solid #e5e7eb;font-size:0.75rem;color:#64748b;line-height:1.4;">
                                * í•œ ì‚¬ëŒì´ ì—¬ëŸ¬ ì†Œë¶„ë¥˜ ì—…ë¬´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>
                </div>
                <div style="display:flex;align-items:center;gap:12px;">
                    <button id="prev-btn" onclick="navigate(-1)" style="background:#f1f5f9;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:16px;color:#475569;display:none;">â—€</button>
                    <div style="font-weight:600;min-width:200px;text-align:center;" id="current-date-display">2023ë…„ 3ì›”</div>
                    <button id="next-btn" onclick="navigate(1)" style="background:#f1f5f9;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:16px;color:#475569;display:none;">â–¶</button>
                </div>
            </div>

            <!-- ì£¼ë³„ ë·° (Week View) - ë™ì  ìƒì„±ë¨ -->
            <div class="calendar-grid week-view active" id="week-view-grid">
                <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
            </div>

            <!-- ì›”ë³„ ë·° (Month View) - ë™ì  ìƒì„±ë¨ -->
            <div class="calendar-grid month-view" id="month-view-grid">
                <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
            </div>

            <!-- ì¼ë³„ ë·° (Day View) - ë™ì  ìƒì„±ë¨ -->
            <div class="calendar-grid day-view" id="day-view-grid">
                <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
            </div>
        </div>

        <aside class="sidebar">
            <h3>íŒ€/ì‚¬ì› í•„í„°</h3>
            
            <div class="team-group">
                <div class="team-header">
                    <input type="checkbox" id="team-dev" checked onchange="handleTeamAllClick('dev')"> 
                    <label for="team-dev">ê°œë°œíŒ€ (ì „ì²´)</label>
                </div>
                <div class="member-item">
                    <input type="checkbox" checked class="member-check dev-member" data-user="user-kim" onchange="handleMemberClick('dev')"> ê¹€ì² ìˆ˜
                </div>
                <div class="member-item">
                    <input type="checkbox" checked class="member-check dev-member" data-user="user-lee" onchange="handleMemberClick('dev')"> ì´ì˜í¬
                </div>
            </div>

            <div class="team-group">
                <div class="team-header">
                    <input type="checkbox" id="team-design" checked onchange="handleTeamAllClick('design')"> 
                    <label for="team-design">ë””ìì¸íŒ€</label>
                </div>
                <div class="member-item">
                    <input type="checkbox" checked class="member-check design-member" data-user="user-park" onchange="handleMemberClick('design')"> ë°•ëª…ìˆ˜
                </div>
                <div class="member-item">
                    <input type="checkbox" checked class="member-check design-member" data-user="user-haha" onchange="handleMemberClick('design')"> í•˜í•˜
                </div>
            </div>
        </aside>
    </div>

    <script>
        // ============================================
        // ğŸ“Š ë°ì´í„° ê´€ë¦¬ ì˜ì—­ (Data Management)
        // ============================================
        // 
        // âš ï¸ ì¤‘ìš”: ì¼ì • ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ë ¤ë©´ ì•„ë˜ ì˜ì—­ë§Œ ìˆ˜ì •í•˜ì„¸ìš”!
        // 
        // 1. SCHEDULE_DATA ê°ì²´ì— ë‚ ì§œë³„ ì¼ì •ì„ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œí•˜ë©´
        //    ì›”ë³„, ì£¼ë³„, ì¼ë³„ ë·°ì— ìë™ìœ¼ë¡œ ë°˜ì˜ë©ë‹ˆë‹¤.
        // 
        // 2. ë‚ ì§œ í˜•ì‹: 'YYYY-MM-DD' (ì˜ˆ: '2023-03-01')
        // 
        // 3. ì¼ì • í•­ëª© í˜•ì‹:
        //    {
        //      user: 'user-kim',           // ì‚¬ìš©ì ID
        //      category: 'planning',       // ì—…ë¬´ ì¹´í…Œê³ ë¦¬ (planning/development/design)
        //      title: 'ìš”êµ¬ì‚¬í•­ ì •ë¦¬',      // ì—…ë¬´ ì œëª©
        //      startTime: '10:00',         // ì‹œì‘ ì‹œê°„
        //      endTime: '12:00',           // ì¢…ë£Œ ì‹œê°„
        //      note: 'ì„ íƒì‚¬í•­'             // ì¶”ê°€ ë©”ëª¨ (ì„ íƒì‚¬í•­)
        //    }
        // 
        // ============================================
        
        // ì‚¬ìš©ì ì •ë³´
        const USERS = {
            'user-kim': { name: 'ê¹€ì² ìˆ˜', team: 'dev' },
            'user-lee': { name: 'ì´ì˜í¬', team: 'dev' },
            'user-park': { name: 'ë°•ëª…ìˆ˜', team: 'design' },
            'user-haha': { name: 'í•˜í•˜', team: 'design' }
        };
        
        // ì—…ë¬´ ì¹´í…Œê³ ë¦¬ (ìƒ‰ìƒ)
        const CATEGORIES = {
            'planning': { name: 'ê¸°íš', color: 'blue', colorCode: '#3b82f6' },
            'development': { name: 'ê°œë°œ', color: 'green', colorCode: '#22c55e' },
            'design': { name: 'ë””ìì¸', color: 'yellow', colorCode: '#eab308' }
        };
        
        // ğŸ“… ì¼ì • ë°ì´í„° (2023ë…„ 2ì›”~4ì›”)
        const SCHEDULE_DATA = {
            '2023-02-27': [
                { user: 'user-kim', category: 'planning', title: 'ìš”êµ¬ì‚¬í•­ ë¶„ì„', startTime: '10:00', endTime: '12:00' },
                { user: 'user-kim', category: 'development', title: 'ë°ì´í„° ëª¨ë¸ ì„¤ê³„', startTime: '14:00', endTime: '16:00' },
                { user: 'user-lee', category: 'development', title: 'API êµ¬í˜„', startTime: '12:00', endTime: '14:00' }
            ],
            '2023-02-28': [
                { user: 'user-kim', category: 'planning', title: 'í”„ë¡œì íŠ¸ í‚¥ì˜¤í”„', startTime: '10:00', endTime: '12:00' },
                { user: 'user-kim', category: 'development', title: 'í™˜ê²½ ì„¤ì •', startTime: '12:00', endTime: '13:00' }
            ],
            '2023-03-01': [
                { user: 'user-kim', category: 'planning', title: 'ìš”êµ¬ì‚¬í•­ ì •ë¦¬', startTime: '10:00', endTime: '12:00' },
                { user: 'user-park', category: 'design', title: 'ìŠ¤íƒ€ì¼ ê°€ì´ë“œ', startTime: '12:00', endTime: '14:00' }
            ],
            '2023-03-02': [
                { user: 'user-kim', category: 'planning', title: 'í™”ë©´ ì„¤ê³„', startTime: '10:00', endTime: '12:00' }
            ],
            '2023-03-03': [
                { user: 'user-kim', category: 'planning', title: 'í”„ë¡œì íŠ¸ ê¸°íšì„œ ì‘ì„±', startTime: '10:00', endTime: '11:00' },
                { user: 'user-kim', category: 'design', title: 'ì™€ì´ì–´í”„ë ˆì„ ê²€í† ', startTime: '11:00', endTime: '12:00' },
                { user: 'user-lee', category: 'development', title: 'API ì—°ë™ ì‘ì—…', startTime: '13:00', endTime: '15:00', note: 'ì™¸ë¶€ ë°ì´í„° ì—°ë™' },
                { user: 'user-park', category: 'design', title: 'ì•„ì´ì½˜ ì œì‘', startTime: '14:00', endTime: '16:00' }
            ],
            '2023-03-06': [
                { user: 'user-lee', category: 'development', title: 'API ê°œë°œ', startTime: '10:00', endTime: '12:00' },
                { user: 'user-lee', category: 'planning', title: 'ê¸°ìˆ  ë¬¸ì„œ ì‘ì„±', startTime: '14:00', endTime: '16:00' }
            ],
            '2023-03-07': [
                { user: 'user-lee', category: 'development', title: 'ë°±ì—”ë“œ ê°œë°œ', startTime: '10:00', endTime: '15:00' }
            ],
            '2023-03-08': [
                { user: 'user-lee', category: 'development', title: 'ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„', startTime: '10:00', endTime: '13:00' },
                { user: 'user-lee', category: 'design', title: 'UI ë¦¬ë·°', startTime: '14:00', endTime: '15:00' },
                { user: 'user-park', category: 'design', title: 'UI ì»´í¬ë„ŒíŠ¸', startTime: '10:00', endTime: '13:00' }
            ],
            '2023-03-09': [
                { user: 'user-lee', category: 'development', title: 'API í…ŒìŠ¤íŠ¸', startTime: '10:00', endTime: '14:00' }
            ],
            '2023-03-10': [
                { user: 'user-park', category: 'design', title: 'UI ì»´í¬ë„ŒíŠ¸ ë””ìì¸', startTime: '10:00', endTime: '13:00' },
                { user: 'user-park', category: 'planning', title: 'ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„±', startTime: '14:00', endTime: '16:00' }
            ],
            '2023-03-13': [
                { user: 'user-lee', category: 'development', title: 'ì½”ë“œ ë¦¬ë·°', startTime: '10:00', endTime: '12:00' },
                { user: 'user-lee', category: 'design', title: 'UX ê°œì„ ', startTime: '14:00', endTime: '16:00' }
            ],
            '2023-03-14': [
                { user: 'user-park', category: 'design', title: 'ë°˜ì‘í˜• ë””ìì¸', startTime: '10:00', endTime: '15:00' }
            ],
            '2023-03-15': [
                { user: 'user-kim', category: 'planning', title: 'ìŠ¤í™ ê²€í† ', startTime: '10:00', endTime: '12:00' },
                { user: 'user-park', category: 'design', title: 'ë””ìì¸ ì‹œìŠ¤í…œ', startTime: '10:00', endTime: '13:00' },
                { user: 'user-park', category: 'development', title: 'í”„ë¡ íŠ¸ì—”ë“œ í˜‘ì—…', startTime: '14:00', endTime: '16:00' }
            ],
            '2023-03-17': [
                { user: 'user-kim', category: 'planning', title: 'ìŠ¤í™ ë¬¸ì„œ ì‘ì„±', startTime: '10:00', endTime: '12:00' },
                { user: 'user-kim', category: 'development', title: 'í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„', startTime: '13:00', endTime: '16:00' },
                { user: 'user-lee', category: 'development', title: 'ë°±ì—”ë“œ API ê°œë°œ', startTime: '10:00', endTime: '15:00' },
                { user: 'user-park', category: 'design', title: 'ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ', startTime: '13:00', endTime: '16:00' }
            ],
            '2023-03-20': [
                { user: 'user-lee', category: 'development', title: 'ì„œë²„ ë°°í¬', startTime: '10:00', endTime: '13:00' },
                { user: 'user-lee', category: 'planning', title: 'ë°°í¬ ê³„íš ìˆ˜ë¦½', startTime: '14:00', endTime: '16:00' },
                { user: 'user-park', category: 'design', title: 'ìµœì¢… ë””ìì¸', startTime: '10:00', endTime: '13:00' }
            ],
            '2023-03-21': [
                { user: 'user-kim', category: 'development', title: 'ì½”ë“œ í†µí•©', startTime: '10:00', endTime: '15:00' }
            ],
            '2023-03-22': [
                { user: 'user-kim', category: 'planning', title: 'ì¤‘ê°„ ì ê²€', startTime: '10:00', endTime: '12:00' }
            ],
            '2023-03-23': [
                { user: 'user-kim', category: 'development', title: 'ë²„ê·¸ ìˆ˜ì •', startTime: '10:00', endTime: '13:00' },
                { user: 'user-kim', category: 'planning', title: 'ì§„í–‰ ìƒí™© ë³´ê³ ', startTime: '14:00', endTime: '16:00' }
            ],
            '2023-03-24': [
                { user: 'user-lee', category: 'development', title: 'ì„±ëŠ¥ ìµœì í™”', startTime: '10:00', endTime: '15:00' }
            ],
            '2023-03-27': [
                { user: 'user-kim', category: 'planning', title: 'ìµœì¢… ì ê²€', startTime: '10:00', endTime: '12:00' },
                { user: 'user-park', category: 'design', title: 'ë””ìì¸ QA', startTime: '10:00', endTime: '13:00' },
                { user: 'user-park', category: 'development', title: 'í”„ë¡ íŠ¸ ë§ˆë¬´ë¦¬', startTime: '14:00', endTime: '16:00' }
            ],
            '2023-03-28': [
                { user: 'user-park', category: 'design', title: 'ìµœì¢… ì‚°ì¶œë¬¼', startTime: '10:00', endTime: '13:00' }
            ],
            '2023-03-29': [
                { user: 'user-lee', category: 'development', title: 'ìµœì¢… í…ŒìŠ¤íŠ¸', startTime: '10:00', endTime: '15:00' },
                { user: 'user-park', category: 'design', title: 'ë””ìì¸ ì •ë¦¬', startTime: '10:00', endTime: '13:00' },
                { user: 'user-haha', category: 'planning', title: 'ë¬¸ì„œ ì‘ì„±', startTime: '10:00', endTime: '12:00' }
            ],
            '2023-03-30': [
                { user: 'user-lee', category: 'development', title: 'ë°°í¬ ì¤€ë¹„', startTime: '10:00', endTime: '15:00' }
            ],
            '2023-03-31': [
                { user: 'user-kim', category: 'planning', title: 'ìµœì¢… ê²€í†  ë° ìŠ¹ì¸', startTime: '10:00', endTime: '12:00' },
                { user: 'user-kim', category: 'design', title: 'ë””ìì¸ QA', startTime: '14:00', endTime: '16:00' },
                { user: 'user-lee', category: 'development', title: 'ìµœì¢… ë°°í¬ ì¤€ë¹„', startTime: '10:00', endTime: '13:00' },
                { user: 'user-lee', category: 'planning', title: 'ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ ì‘ì„±', startTime: '14:00', endTime: '16:00' },
                { user: 'user-park', category: 'design', title: 'ìµœì¢… ì‚°ì¶œë¬¼ ì •ë¦¬', startTime: '10:00', endTime: '15:00' }
            ],
            // 2023ë…„ 4ì›” ë°ì´í„°
            '2023-04-03': [
                { user: 'user-kim', category: 'planning', title: 'í”„ë¡œì íŠ¸ íšŒê³ ', startTime: '10:00', endTime: '12:00' },
                { user: 'user-lee', category: 'development', title: 'ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§', startTime: '14:00', endTime: '16:00' }
            ],
            '2023-04-04': [
                { user: 'user-park', category: 'design', title: 'ë””ìì¸ ì‹œìŠ¤í…œ ì •ë¦¬', startTime: '10:00', endTime: '15:00' },
                { user: 'user-haha', category: 'planning', title: 'ë¬¸ì„œí™” ì‘ì—…', startTime: '13:00', endTime: '17:00' }
            ],
            '2023-04-05': [
                { user: 'user-kim', category: 'planning', title: 'Q2 ê³„íš ìˆ˜ë¦½', startTime: '10:00', endTime: '12:00' },
                { user: 'user-lee', category: 'development', title: 'ì„±ëŠ¥ ê°œì„ ', startTime: '13:00', endTime: '16:00' }
            ],
            '2023-04-10': [
                { user: 'user-kim', category: 'planning', title: 'ì‹ ê·œ í”„ë¡œì íŠ¸ ê¸°íš', startTime: '10:00', endTime: '12:00' },
                { user: 'user-park', category: 'design', title: 'UI ì»¨ì…‰ ìŠ¤ì¼€ì¹˜', startTime: '13:00', endTime: '17:00' }
            ],
            '2023-04-11': [
                { user: 'user-lee', category: 'development', title: 'í”„ë¡œí† íƒ€ì… ê°œë°œ', startTime: '10:00', endTime: '15:00' },
                { user: 'user-haha', category: 'planning', title: 'ìš”êµ¬ì‚¬í•­ ì •ë¦¬', startTime: '14:00', endTime: '17:00' }
            ],
            '2023-04-12': [
                { user: 'user-kim', category: 'planning', title: 'ì´í•´ê´€ê³„ì ë¯¸íŒ…', startTime: '10:00', endTime: '11:00' },
                { user: 'user-park', category: 'design', title: 'ì™€ì´ì–´í”„ë ˆì„ ì‘ì„±', startTime: '13:00', endTime: '17:00' }
            ],
            // 2023ë…„ 2ì›” ë°ì´í„°
            '2023-02-01': [
                { user: 'user-kim', category: 'planning', title: 'ì›”ê°„ ê³„íš ìˆ˜ë¦½', startTime: '10:00', endTime: '12:00' },
                { user: 'user-lee', category: 'development', title: 'ì¸í”„ë¼ ì ê²€', startTime: '14:00', endTime: '16:00' }
            ],
            '2023-02-06': [
                { user: 'user-park', category: 'design', title: 'ë¸Œëœë“œ ê°€ì´ë“œ ì—…ë°ì´íŠ¸', startTime: '10:00', endTime: '13:00' },
                { user: 'user-haha', category: 'planning', title: 'íŒ€ ìŠ¤í”„ë¦°íŠ¸ ê³„íš', startTime: '14:00', endTime: '16:00' }
            ],
            '2023-02-13': [
                { user: 'user-kim', category: 'planning', title: 'í”„ë¡œì íŠ¸ í‚¥ì˜¤í”„', startTime: '10:00', endTime: '12:00' },
                { user: 'user-lee', category: 'development', title: 'ê°œë°œ í™˜ê²½ êµ¬ì¶•', startTime: '13:00', endTime: '17:00' }
            ],
            '2023-02-14': [
                { user: 'user-park', category: 'design', title: 'ì´ˆê¸° ë””ìì¸ ì»¨ì…‰', startTime: '10:00', endTime: '14:00' },
                { user: 'user-haha', category: 'planning', title: 'ì‚¬ìš©ì ë¦¬ì„œì¹˜', startTime: '15:00', endTime: '17:00' }
            ],
            '2023-02-20': [
                { user: 'user-kim', category: 'planning', title: 'ì¤‘ê°„ ì ê²€ íšŒì˜', startTime: '10:00', endTime: '11:00' },
                { user: 'user-lee', category: 'development', title: 'ì½”ì–´ ê¸°ëŠ¥ ê°œë°œ', startTime: '13:00', endTime: '17:00' }
            ],
            '2023-02-21': [
                { user: 'user-park', category: 'design', title: 'ë””ìì¸ ì‹œì•ˆ ì‘ì—…', startTime: '10:00', endTime: '15:00' }
            ]
        };
        
        // ============================================
        // ğŸ¯ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì˜ì—­
        // ============================================
        
        // 1. íŒ€ ì „ì²´ ì„ íƒ í´ë¦­ ì‹œ
        function handleTeamAllClick(teamType) {
            const isChecked = document.getElementById(`team-${teamType}`).checked;
            const members = document.querySelectorAll(`.${teamType}-member`);
            members.forEach(m => m.checked = isChecked);
            syncCalendar();
        }

        // 2. ê°œë³„ ë©¤ë²„ í´ë¦­ ì‹œ (íŒ€ ì „ì²´ ì²´í¬ë°•ìŠ¤ ìƒíƒœ ì—°ë™)
        function handleMemberClick(teamType) {
            const teamAllCb = document.getElementById(`team-${teamType}`);
            const members = document.querySelectorAll(`.${teamType}-member`);
            const checkedCount = document.querySelectorAll(`.${teamType}-member:checked`).length;

            // í•˜ë‚˜ë¼ë„ ì„ íƒ í•´ì œ ì‹œ ì „ì²´ ì„ íƒ í•´ì œ, ëª¨ë‘ ì„ íƒ ì‹œ ì „ì²´ ì„ íƒ ì²´í¬
            teamAllCb.checked = (members.length === checkedCount);
            
            syncCalendar();
        }

        // 3. ìº˜ë¦°ë” í™”ë©´ ë™ê¸°í™”
        function syncCalendar() {
            const activeUsers = Array.from(document.querySelectorAll('.member-check:checked'))
                                     .map(cb => cb.dataset.user);
            
            // Task ë¸”ë¡ í•„í„°ë§ (ì£¼ë³„/ì¼ë³„ ë·°)
            document.querySelectorAll('.task').forEach(t => {
                t.style.display = 'none';
            });
            
            activeUsers.forEach(user => {
                document.querySelectorAll('.task.' + user).forEach(task => {
                    task.style.display = 'block';
                });
            });
            
            // ì›”ë³„ ë·°ì˜ ì‚¬ëŒë³„ ì¼ì • í‘œì‹œ í•„í„°ë§
            document.querySelectorAll('.month-view .person').forEach(person => {
                const classList = Array.from(person.classList);
                const userClass = classList.find(c => c.startsWith('user-'));
                
                if (userClass && activeUsers.includes(userClass)) {
                    person.style.display = 'flex';
                } else if (userClass) {
                    person.style.display = 'none';
                }
            });
            
            // ë¹ˆ ì¼ì • í‘œì‹œ ìˆ¨ê¸°ê¸° (ëª¨ë“  ì‚¬ëŒì´ í•„í„°ë§ëœ ê²½ìš°)
            document.querySelectorAll('.schedule-indicator').forEach(indicator => {
                const visiblePersons = Array.from(indicator.querySelectorAll('.person')).filter(p => p.style.display !== 'none');
                if (visiblePersons.length === 0) {
                    indicator.style.display = 'none';
                } else {
                    indicator.style.display = 'block';
                }
            });
        }

        // ============================================
        // ğŸ“… ë°ì´í„° ê¸°ë°˜ ë·° ìƒì„± í•¨ìˆ˜
        // ============================================
        
        // íŠ¹ì • ë‚ ì§œì˜ ì¼ì • ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        function getScheduleByDate(dateStr) {
            return SCHEDULE_DATA[dateStr] || [];
        }
        
        // ë‚ ì§œë³„ë¡œ ì‚¬ìš©ìë¥¼ ê·¸ë£¹í™”í•˜ì—¬ ì¼ì • ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        function getScheduleSummaryByDate(dateStr) {
            const schedules = getScheduleByDate(dateStr);
            const userSchedules = {};
            
            schedules.forEach(schedule => {
                if (!userSchedules[schedule.user]) {
                    userSchedules[schedule.user] = {
                        userName: USERS[schedule.user].name,
                        categories: []
                    };
                }
                
                if (!userSchedules[schedule.user].categories.find(c => c.category === schedule.category)) {
                    userSchedules[schedule.user].categories.push({
                        category: schedule.category,
                        categoryName: CATEGORIES[schedule.category].name,
                        color: CATEGORIES[schedule.category].color,
                        colorCode: CATEGORIES[schedule.category].colorCode,
                        tasks: []
                    });
                }
                
                const catIndex = userSchedules[schedule.user].categories.findIndex(c => c.category === schedule.category);
                userSchedules[schedule.user].categories[catIndex].tasks.push({
                    title: schedule.title,
                    startTime: schedule.startTime,
                    endTime: schedule.endTime,
                    note: schedule.note
                });
            });
            
            return userSchedules;
        }

        function changeView(btn) {
            // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
            document.querySelectorAll('.view-switch button').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // ë·° íƒ€ì… ê²°ì •
            const viewText = btn.textContent.trim();
            let viewType = 'week-view';
            if (viewText.includes('ì›”')) viewType = 'month-view';
            else if (viewText.includes('ì¼')) viewType = 'day-view';
            
            // ëª¨ë“  ìº˜ë¦°ë” ê·¸ë¦¬ë“œ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.calendar-grid').forEach(grid => {
                grid.classList.remove('active');
            });
            
            // ì„ íƒëœ ë·°ë§Œ í‘œì‹œ
            document.querySelector(`.${viewType}`).classList.add('active');
            
            // í—¤ë” ë‚ ì§œ í‘œì‹œ ë° í™”ì‚´í‘œ ë²„íŠ¼ ì œì–´
            const monthNames = ['', '1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”', '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'];
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            // ëª¨ë“  ë·°ì—ì„œ ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ í‘œì‹œ
            prevBtn.style.display = 'block';
            nextBtn.style.display = 'block';
            
            if (viewType === 'month-view') {
                document.getElementById('current-date-display').textContent = `${currentYear}ë…„ ${monthNames[currentMonth]}`;
            } else if (viewType === 'day-view') {
                document.getElementById('current-date-display').textContent = currentDayDateDisplay.replace(/\s*\([^)]*\)/, '');
            } else {
                // ì£¼ë³„ ë·°
                const startDate = new Date(currentWeekDates[0]);
                const endDate = new Date(currentWeekDates[4]);
                const startMonth = startDate.getMonth() + 1;
                const startDay = startDate.getDate();
                const endMonth = endDate.getMonth() + 1;
                const endDay = endDate.getDate();
                document.getElementById('current-date-display').textContent = `${startMonth}/${startDay} - ${endMonth}/${endDay}`;
            }
        }

        // ë‚ ì§œ í´ë¦­ ì‹œ ì¼ë³„ ë·°ë¡œ ì „í™˜
        function goToDayView(dateString, event) {
            // ì„ íƒëœ ë‚ ì§œ í‘œì‹œ (ì´ì „ ì„ íƒ í•´ì œ)
            document.querySelectorAll('.month-view .cell.selected').forEach(cell => {
                cell.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            // ë‚ ì§œ ë°ì´í„° ì¶”ì¶œ (data-date ì†ì„±ì—ì„œ)
            const dateStr = event.currentTarget.getAttribute('data-date');
            
            // ìƒë‹¨ íˆ´ë°” ë‚ ì§œ ì—…ë°ì´íŠ¸ (ìš”ì¼ ì œì™¸)
            const shortDate = dateString.replace(/\s*\([^)]*\)/, '');
            document.getElementById('current-date-display').textContent = shortDate;
            
            // ì¼ë³„ ë·° ì¬ìƒì„±
            currentDayDate = dateStr;
            currentDayDateDisplay = dateString;
            generateDayView(dateStr, dateString);
            
            // ëª¨ë“  ë·° ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.calendar-grid').forEach(grid => {
                grid.classList.remove('active');
            });
            
            // ì¼ë³„ ë·° í‘œì‹œ
            document.querySelector('.day-view').classList.add('active');
            
            // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
            document.querySelectorAll('.view-switch button').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.view-switch button')[2].classList.add('active'); // ì¼ë³„ ë²„íŠ¼
            
            // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ í‘œì‹œ
            document.getElementById('prev-btn').style.display = 'block';
            document.getElementById('next-btn').style.display = 'block';
            
            // í•„í„° ë™ê¸°í™”
            syncCalendar();
        }
        
        // ì›” ì´ë™ í•¨ìˆ˜ (ì´ì „/ë‹¤ìŒ ë‹¬)
        function navigateMonth(direction) {
            currentMonth += direction;
            
            // ì›” ë²”ìœ„ ì¡°ì •
            if (currentMonth > 12) {
                currentMonth = 1;
                currentYear++;
            } else if (currentMonth < 1) {
                currentMonth = 12;
                currentYear--;
            }
            
            // ì›”ë³„ ë·° ì¬ìƒì„±
            generateMonthView(currentYear, currentMonth);
            
            // íˆ´íŒ ì¬ìƒì„±
            generateTooltipsForMonthView();
            
            // í•„í„° ë™ê¸°í™”
            syncCalendar();
        }
        
        // ì£¼ ì´ë™ í•¨ìˆ˜ (ì´ì „/ë‹¤ìŒ ì£¼)
        function navigateWeek(direction) {
            // í˜„ì¬ ì£¼ì˜ ì²« ë²ˆì§¸ ë‚ ì§œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì´ë™
            const firstDate = new Date(currentWeekDates[0]);
            firstDate.setDate(firstDate.getDate() + (direction * 7)); // 7ì¼ì”© ì´ë™
            
            // ìƒˆë¡œìš´ ì£¼ì˜ ë‚ ì§œ ë°°ì—´ ìƒì„± (ì›”~ê¸ˆ)
            currentWeekDates = [];
            for (let i = 0; i < 5; i++) {
                const date = new Date(firstDate);
                date.setDate(firstDate.getDate() + i);
                const dateStr = date.toISOString().split('T')[0];
                currentWeekDates.push(dateStr);
            }
            
            // ì£¼ë³„ ë·° ì¬ìƒì„±
            generateWeekView(currentWeekDates);
            
            // í—¤ë” ë‚ ì§œ í‘œì‹œ ì—…ë°ì´íŠ¸
            const startDate = new Date(currentWeekDates[0]);
            const endDate = new Date(currentWeekDates[4]);
            const startMonth = startDate.getMonth() + 1;
            const startDay = startDate.getDate();
            const endMonth = endDate.getMonth() + 1;
            const endDay = endDate.getDate();
            document.getElementById('current-date-display').textContent = `${startMonth}/${startDay} - ${endMonth}/${endDay}`;
            
            // í•„í„° ë™ê¸°í™”
            syncCalendar();
        }
        
        // ì¼ ì´ë™ í•¨ìˆ˜ (ì´ì „/ë‹¤ìŒ ì¼)
        function navigateDay(direction) {
            // í˜„ì¬ ë‚ ì§œì—ì„œ directionì¼ ì´ë™
            const date = new Date(currentDayDate);
            date.setDate(date.getDate() + direction);
            
            // ìƒˆë¡œìš´ ë‚ ì§œ ë¬¸ìì—´ ìƒì„±
            currentDayDate = date.toISOString().split('T')[0];
            
            // ë‚ ì§œ í‘œì‹œ í˜•ì‹ ìƒì„±
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const dayNames = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];
            const dayName = dayNames[date.getDay()];
            currentDayDateDisplay = `${year}ë…„ ${month}ì›” ${day}ì¼ (${dayName})`;
            
            // ì¼ë³„ ë·° ì¬ìƒì„±
            generateDayView(currentDayDate, currentDayDateDisplay);
            
            // í—¤ë” ë‚ ì§œ í‘œì‹œ ì—…ë°ì´íŠ¸
            document.getElementById('current-date-display').textContent = `${year}ë…„ ${month}ì›” ${day}ì¼`;
            
            // í•„í„° ë™ê¸°í™”
            syncCalendar();
        }
        
        // í†µí•© ë„¤ë¹„ê²Œì´ì…˜ í•¨ìˆ˜
        function navigate(direction) {
            // í˜„ì¬ í™œì„±í™”ëœ ë·° ì°¾ê¸°
            const activeView = document.querySelector('.calendar-grid.active');
            
            if (activeView.classList.contains('month-view')) {
                navigateMonth(direction);
            } else if (activeView.classList.contains('week-view')) {
                navigateWeek(direction);
            } else if (activeView.classList.contains('day-view')) {
                navigateDay(direction);
            }
        }
        
        // ============================================
        // ğŸ“… ì£¼ë³„ ë·° ë™ì  ìƒì„±
        // ============================================
        
        // í˜„ì¬ ì£¼ë³„ ë·°ì— í‘œì‹œí•  ë‚ ì§œ ë°°ì—´ (ê¸°ë³¸: 2/27~3/3)
        let currentWeekDates = ['2023-02-27', '2023-02-28', '2023-03-01', '2023-03-02', '2023-03-03'];
        
        function generateWeekView(weekDates = currentWeekDates) {
            const weekGrid = document.getElementById('week-view-grid');
            weekGrid.innerHTML = '';
            
            // ì‹œê°„ ë°°ì—´ (09:00~18:00)
            const hours = ['09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00'];
            
            // ìš”ì¼ í—¤ë” ìƒì„±
            let headerHTML = '<div class="cell cell-header">ì‹œê°„</div>';
            const dayNames = ['ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼'];
            weekDates.forEach((dateStr, index) => {
                const date = new Date(dateStr);
                const month = date.getMonth() + 1;
                const day = date.getDate();
                headerHTML += `<div class="cell cell-header">${dayNames[index]} (${month}/${day})</div>`;
            });
            weekGrid.innerHTML += headerHTML;
            
            // ì‹œê°„ë³„ í–‰ ìƒì„±
            hours.forEach(hour => {
                let rowHTML = `<div class="cell time-label">${hour}</div>`;
                
                weekDates.forEach(dateStr => {
                    const schedules = getScheduleByDate(dateStr);
                    let cellContent = '';
                    
                    // í•´ë‹¹ ì‹œê°„ì— ì‹œì‘í•˜ëŠ” ì¼ì • ì°¾ê¸°
                    const hourSchedules = schedules.filter(s => s.startTime === hour);
                    const columnCount = hourSchedules.length;
                    
                    if (columnCount > 1) {
                        // ê²¹ì¹˜ëŠ” ì¼ì •ì´ ìˆëŠ” ê²½ìš° - ì»¬ëŸ¼ ë¶„í•  ë°©ì‹
                        hourSchedules.forEach((schedule, index) => {
                            const category = CATEGORIES[schedule.category];
                            const user = USERS[schedule.user];
                            const startHour = parseInt(schedule.startTime.split(':')[0]);
                            const endHour = parseInt(schedule.endTime.split(':')[0]);
                            const durationHours = endHour - startHour;
                            const height = durationHours * 80 - 20;
                            
                            // ì»¬ëŸ¼ ë¶„í• : ë™ì¼í•œ ë„ˆë¹„ë¡œ ë‚˜ëˆ”
                            const widthPercent = 100 / columnCount;
                            const leftPercent = (100 / columnCount) * index;
                            
                            const note = schedule.note ? `<br><small style="opacity:0.7;">${schedule.note}</small>` : '';
                            const noteText = schedule.note ? schedule.note : '';
                            
                            // íˆ´íŒ HTML
                            const tooltip = `<div class="task-detail-tooltip">
                                <div class="tooltip-row"><span class="tooltip-label">ë¶„ë¥˜:</span> <span class="tooltip-value">${category.name}</span></div>
                                <div class="tooltip-row"><span class="tooltip-label">ì œëª©:</span> <span class="tooltip-value">${schedule.title}</span></div>
                                <div class="tooltip-row"><span class="tooltip-label">ë‹´ë‹¹ì:</span> <span class="tooltip-value">${user.name}</span></div>
                                <div class="tooltip-row"><span class="tooltip-label">ì‹œê°„:</span> <span class="tooltip-value">${schedule.startTime} - ${schedule.endTime} (${durationHours}ì‹œê°„)</span></div>
                                ${noteText ? `<div class="tooltip-row"><span class="tooltip-label">ë¹„ê³ :</span> <span class="tooltip-value">${noteText}</span></div>` : ''}
                            </div>`;
                            
                            cellContent += `<div class="task ${category.color} ${schedule.user}" style="height: ${height}px; position: absolute; left: calc(${leftPercent}% + 4px); right: auto; width: calc(${widthPercent}% - 10px); top: 5px; z-index: ${index + 1}; ${index < columnCount - 1 ? 'border-right: 2px solid white;' : ''}">[${category.name}] ${schedule.title} - ${user.name}${note}${tooltip}</div>`;
                        });
                    } else {
                        // ê²¹ì¹˜ì§€ ì•ŠëŠ” ê²½ìš° - ì „ì²´ ë„ˆë¹„ ì‚¬ìš©
                        hourSchedules.forEach(schedule => {
                            const category = CATEGORIES[schedule.category];
                            const user = USERS[schedule.user];
                            const startHour = parseInt(schedule.startTime.split(':')[0]);
                            const endHour = parseInt(schedule.endTime.split(':')[0]);
                            const durationHours = endHour - startHour;
                            const height = durationHours * 80 - 20;
                            
                            const note = schedule.note ? `<br><small style="opacity:0.7;">${schedule.note}</small>` : '';
                            const noteText = schedule.note ? schedule.note : '';
                            
                            // íˆ´íŒ HTML
                            const tooltip = `<div class="task-detail-tooltip">
                                <div class="tooltip-row"><span class="tooltip-label">ë¶„ë¥˜:</span> <span class="tooltip-value">${category.name}</span></div>
                                <div class="tooltip-row"><span class="tooltip-label">ì œëª©:</span> <span class="tooltip-value">${schedule.title}</span></div>
                                <div class="tooltip-row"><span class="tooltip-label">ë‹´ë‹¹ì:</span> <span class="tooltip-value">${user.name}</span></div>
                                <div class="tooltip-row"><span class="tooltip-label">ì‹œê°„:</span> <span class="tooltip-value">${schedule.startTime} - ${schedule.endTime} (${durationHours}ì‹œê°„)</span></div>
                                ${noteText ? `<div class="tooltip-row"><span class="tooltip-label">ë¹„ê³ :</span> <span class="tooltip-value">${noteText}</span></div>` : ''}
                            </div>`;
                            
                            cellContent += `<div class="task ${category.color} ${schedule.user}" style="height: ${height}px;">[${category.name}] ${schedule.title} - ${user.name}${note}${tooltip}</div>`;
                        });
                    }
                    
                    rowHTML += `<div class="cell" style="position: relative;">${cellContent}</div>`;
                });
                
                weekGrid.innerHTML += rowHTML;
            });
        }
        
        // ============================================
        // ğŸ“… ì›”ë³„ ë·° í˜„ì¬ ìƒíƒœ
        // ============================================
        
        let currentYear = 2023;
        let currentMonth = 3;
        
        // ============================================
        // ğŸ“† ì¼ë³„ ë·° ë™ì  ìƒì„±
        // ============================================
        
        let currentDayDate = '2023-03-01';
        let currentDayDateDisplay = '2023ë…„ 3ì›” 1ì¼ (ìˆ˜ìš”ì¼)';
        
        function generateDayView(dateStr = currentDayDate, dateDisplay = currentDayDateDisplay) {
            const dayGrid = document.getElementById('day-view-grid');
            dayGrid.innerHTML = '';
            
            // ì‹œê°„ ë°°ì—´ (09:00~18:00)
            const hours = ['09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00'];
            
            // í—¤ë” ìƒì„±
            let headerHTML = '<div class="cell cell-header">ì‹œê°„</div>';
            headerHTML += `<div class="cell cell-header" id="day-view-date">${dateDisplay}</div>`;
            dayGrid.innerHTML += headerHTML;
            
            // ì‹œê°„ë³„ í–‰ ìƒì„±
            const schedules = getScheduleByDate(dateStr);
            
            hours.forEach(hour => {
                let cellContent = '';
                
                // í•´ë‹¹ ì‹œê°„ì— ì‹œì‘í•˜ëŠ” ì¼ì • ì°¾ê¸°
                const hourSchedules = schedules.filter(s => s.startTime === hour);
                const columnCount = hourSchedules.length;
                
                if (columnCount > 1) {
                    // ê²¹ì¹˜ëŠ” ì¼ì •ì´ ìˆëŠ” ê²½ìš° - ì»¬ëŸ¼ ë¶„í•  ë°©ì‹
                    hourSchedules.forEach((schedule, index) => {
                        const category = CATEGORIES[schedule.category];
                        const user = USERS[schedule.user];
                        const startHour = parseInt(schedule.startTime.split(':')[0]);
                        const endHour = parseInt(schedule.endTime.split(':')[0]);
                        const durationHours = endHour - startHour;
                        const height = durationHours * 80 - 20;
                        
                        // ì»¬ëŸ¼ ë¶„í• : ë™ì¼í•œ ë„ˆë¹„ë¡œ ë‚˜ëˆ”
                        const widthPercent = 100 / columnCount;
                        const leftPercent = (100 / columnCount) * index;
                        
                        const note = schedule.note ? `<br><small style="opacity:0.7;">${schedule.note}</small>` : '';
                        const noteText = schedule.note ? schedule.note : '';
                        
                        // íˆ´íŒ HTML
                        const tooltip = `<div class="task-detail-tooltip">
                            <div class="tooltip-row"><span class="tooltip-label">ë¶„ë¥˜:</span> <span class="tooltip-value">${category.name}</span></div>
                            <div class="tooltip-row"><span class="tooltip-label">ì œëª©:</span> <span class="tooltip-value">${schedule.title}</span></div>
                            <div class="tooltip-row"><span class="tooltip-label">ë‹´ë‹¹ì:</span> <span class="tooltip-value">${user.name}</span></div>
                            <div class="tooltip-row"><span class="tooltip-label">ì‹œê°„:</span> <span class="tooltip-value">${schedule.startTime} - ${schedule.endTime} (${durationHours}ì‹œê°„)</span></div>
                            ${noteText ? `<div class="tooltip-row"><span class="tooltip-label">ë¹„ê³ :</span> <span class="tooltip-value">${noteText}</span></div>` : ''}
                        </div>`;
                        
                        cellContent += `<div class="task ${category.color} ${schedule.user}" style="height: ${height}px; position: absolute; left: calc(${leftPercent}% + 4px); right: auto; width: calc(${widthPercent}% - 10px); top: 5px; z-index: ${index + 1}; ${index < columnCount - 1 ? 'border-right: 2px solid white;' : ''}">[${category.name}] ${schedule.title} - ${user.name}${note}${tooltip}</div>`;
                    });
                } else {
                    // ê²¹ì¹˜ì§€ ì•ŠëŠ” ê²½ìš° - ì „ì²´ ë„ˆë¹„ ì‚¬ìš©
                    hourSchedules.forEach(schedule => {
                        const category = CATEGORIES[schedule.category];
                        const user = USERS[schedule.user];
                        const startHour = parseInt(schedule.startTime.split(':')[0]);
                        const endHour = parseInt(schedule.endTime.split(':')[0]);
                        const durationHours = endHour - startHour;
                        const height = durationHours * 80 - 20;
                        
                        const note = schedule.note ? `<br><small style="opacity:0.7;">${schedule.note}</small>` : '';
                        const noteText = schedule.note ? schedule.note : '';
                        
                        // íˆ´íŒ HTML
                        const tooltip = `<div class="task-detail-tooltip">
                            <div class="tooltip-row"><span class="tooltip-label">ë¶„ë¥˜:</span> <span class="tooltip-value">${category.name}</span></div>
                            <div class="tooltip-row"><span class="tooltip-label">ì œëª©:</span> <span class="tooltip-value">${schedule.title}</span></div>
                            <div class="tooltip-row"><span class="tooltip-label">ë‹´ë‹¹ì:</span> <span class="tooltip-value">${user.name}</span></div>
                            <div class="tooltip-row"><span class="tooltip-label">ì‹œê°„:</span> <span class="tooltip-value">${schedule.startTime} - ${schedule.endTime} (${durationHours}ì‹œê°„)</span></div>
                            ${noteText ? `<div class="tooltip-row"><span class="tooltip-label">ë¹„ê³ :</span> <span class="tooltip-value">${noteText}</span></div>` : ''}
                        </div>`;
                        
                        cellContent += `<div class="task ${category.color} ${schedule.user}" style="height: ${height}px;">[${category.name}] ${schedule.title} - ${user.name}${note}${tooltip}</div>`;
                    });
                }
                
                dayGrid.innerHTML += `<div class="cell time-label">${hour}</div><div class="cell" style="position: relative;">${cellContent}</div>`;
            });
        }
        
        // ============================================
        // ğŸ“… ì›”ë³„ ë·° ë™ì  ìƒì„±
        // ============================================
        
        function generateMonthView(year = 2023, month = 3) {
            const monthGrid = document.getElementById('month-view-grid');
            monthGrid.innerHTML = '';
            
            // í˜„ì¬ ìƒíƒœ ì—…ë°ì´íŠ¸
            currentYear = year;
            currentMonth = month;
            
            // í—¤ë” ë‚ ì§œ í‘œì‹œ ì—…ë°ì´íŠ¸
            const monthNames = ['', '1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”', '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'];
            document.getElementById('current-date-display').textContent = `${year}ë…„ ${monthNames[month]}`;
            
            // í—¤ë” ìƒì„±
            const dayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            let headerHTML = '';
            dayNames.forEach(day => {
                headerHTML += `<div class="cell cell-header">${day}</div>`;
            });
            monthGrid.innerHTML += headerHTML;
            
            // í•´ë‹¹ ì›”ì˜ ì²«ë‚ ê³¼ ë§ˆì§€ë§‰ ë‚  ê³„ì‚°
            const firstDay = new Date(year, month - 1, 1);
            const lastDay = new Date(year, month, 0);
            const firstDayOfWeek = firstDay.getDay(); // 0(ì¼) ~ 6(í† )
            const lastDate = lastDay.getDate();
            
            // ì´ì „ ë‹¬ì˜ ë§ˆì§€ë§‰ ë‚ ë“¤
            const prevLastDay = new Date(year, month - 1, 0);
            const prevLastDate = prevLastDay.getDate();
            
            let dateHTML = '';
            let cellCount = 0;
            
            // ì´ì „ ë‹¬ ë‚ ì§œë“¤
            for (let i = firstDayOfWeek - 1; i >= 0; i--) {
                const date = prevLastDate - i;
                const isWeekend = cellCount % 7 === 0 || cellCount % 7 === 6;
                dateHTML += `<div class="cell" style="background:#fafafa;color:#ccc;display:flex;align-items:start;padding:8px;">${date}</div>`;
                cellCount++;
            }
            
            // í˜„ì¬ ë‹¬ ë‚ ì§œë“¤
            for (let date = 1; date <= lastDate; date++) {
                const dateStr = `${year}-${String(month).padStart(2, '0')}-${String(date).padStart(2, '0')}`;
                const dayOfWeek = (firstDayOfWeek + date - 1) % 7;
                const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;
                const weekendStyle = isWeekend ? 'background:#fafafa;' : '';
                
                const schedules = getScheduleSummaryByDate(dateStr);
                const hasSchedule = Object.keys(schedules).length > 0;
                
                if (hasSchedule) {
                    // ì¼ì •ì´ ìˆëŠ” ë‚ ì§œ
                    const dayNames = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];
                    const dayName = dayNames[dayOfWeek];
                    
                    dateHTML += `<div class="cell" data-date="${dateStr}" onclick="goToDayView('${year}ë…„ ${month}ì›” ${date}ì¼ (${dayName})', event)" style="${weekendStyle}display:flex;flex-direction:column;align-items:start;padding:8px;">`;
                    dateHTML += `<div style="font-weight:600;">${date}</div>`;
                    dateHTML += `<div class="schedule-indicator">`;
                    
                    // ê° ì‚¬ìš©ìë³„ë¡œ ì¶œë ¥
                    for (const [userId, userSchedule] of Object.entries(schedules)) {
                        dateHTML += `<div class="person ${userId}">`;
                        dateHTML += `<span class="person-name">${userSchedule.userName}</span>`;
                        dateHTML += `<span class="task-dots">`;
                        
                        // ê° ì¹´í…Œê³ ë¦¬ì˜ ì  ì¶œë ¥
                        userSchedule.categories.forEach(cat => {
                            dateHTML += `<span style="color:${cat.colorCode};">â—</span>`;
                        });
                        
                        dateHTML += `</span>`;
                        dateHTML += `</div>`;
                    }
                    
                    dateHTML += `</div></div>`;
                } else {
                    // ì¼ì •ì´ ì—†ëŠ” ë‚ ì§œ
                    if (isWeekend) {
                        dateHTML += `<div class="cell" style="${weekendStyle}display:flex;align-items:start;padding:8px;">${date}</div>`;
                    } else {
                        dateHTML += `<div class="cell" data-date="${dateStr}" onclick="goToDayView('${year}ë…„ ${month}ì›” ${date}ì¼', event)" style="display:flex;align-items:start;padding:8px;">${date}</div>`;
                    }
                }
                cellCount++;
            }
            
            // ë‹¤ìŒ ë‹¬ ë‚ ì§œë“¤
            const remainingCells = (7 - (cellCount % 7)) % 7;
            for (let i = 1; i <= remainingCells; i++) {
                dateHTML += `<div class="cell" style="background:#fafafa;color:#ccc;display:flex;align-items:start;padding:8px;">${i}</div>`;
            }
            
            monthGrid.innerHTML += dateHTML;
        }
        
        // ============================================
        // ğŸ¨ ì›”ë³„ ë·° íˆ´íŒ ìë™ ìƒì„±
        // ============================================
        
        function generateTooltipsForMonthView() {
            // ì›”ë³„ ë·°ì˜ ëª¨ë“  ë‚ ì§œ ì…€ì„ ì°¾ìŒ
            document.querySelectorAll('.month-view [data-date]').forEach(dateCell => {
                const dateStr = dateCell.getAttribute('data-date');
                const scheduleSummary = getScheduleSummaryByDate(dateStr);
                
                // í•´ë‹¹ ë‚ ì§œì— ì¼ì •ì´ ì—†ìœ¼ë©´ ìŠ¤í‚µ
                if (Object.keys(scheduleSummary).length === 0) return;
                
                // ë‚ ì§œ ì…€ ë‚´ì˜ ëª¨ë“  .person ìš”ì†Œë¥¼ ì°¾ìŒ
                const personElements = dateCell.querySelectorAll('.person');
                
                personElements.forEach(personEl => {
                    // ì´ë¯¸ íˆ´íŒì´ ìˆìœ¼ë©´ ìŠ¤í‚µ
                    if (personEl.querySelector('.task-tooltip')) return;
                    
                    // ì‚¬ìš©ì í´ë˜ìŠ¤ ì°¾ê¸° (user-kim, user-lee ë“±)
                    const userClass = Array.from(personEl.classList).find(c => c.startsWith('user-'));
                    if (!userClass) return;
                    
                    const userSchedule = scheduleSummary[userClass];
                    if (!userSchedule) return;
                    
                    // ë‚ ì§œ í¬ë§· (MM/DD)
                    const dateObj = new Date(dateStr);
                    const month = dateObj.getMonth() + 1;
                    const day = dateObj.getDate();
                    
                    // íˆ´íŒ HTML ìƒì„±
                    const tooltip = document.createElement('div');
                    tooltip.className = 'task-tooltip';
                    
                    let tooltipHTML = `<div class="tooltip-title">${userSchedule.userName} - ${month}/${day} ì—…ë¬´</div>`;
                    
                    userSchedule.categories.forEach(cat => {
                        cat.tasks.forEach(task => {
                            tooltipHTML += `
                                <div class="task-item">
                                    <span style="color:${cat.colorCode};">â—</span>
                                    <span>${cat.categoryName} - ${task.title}</span>
                                </div>
                            `;
                        });
                    });
                    
                    tooltip.innerHTML = tooltipHTML;
                    personEl.appendChild(tooltip);
                });
            });
        }
        
        // ============================================
        // ğŸš€ í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“… ìº˜ë¦°ë” ì´ˆê¸°í™” ì¤‘...');
            
            // 1. ì›”ë³„ ë·° ìƒì„± (ê¸°ë³¸: 2023ë…„ 3ì›”)
            generateMonthView(2023, 3);
            console.log('âœ… ì›”ë³„ ë·° ìƒì„± ì™„ë£Œ!');
            
            // 2. ì›”ë³„ ë·° íˆ´íŒ ìë™ ìƒì„±
            generateTooltipsForMonthView();
            console.log('âœ… ì›”ë³„ ë·° íˆ´íŒ ìë™ ìƒì„± ì™„ë£Œ!');
            
            // 3. ì£¼ë³„ ë·° ìƒì„± (ê¸°ë³¸: 2/27~3/3 ì£¼)
            generateWeekView();
            console.log('âœ… ì£¼ë³„ ë·° ìƒì„± ì™„ë£Œ!');
            
            // 4. ì¼ë³„ ë·° ìƒì„± (ê¸°ë³¸: 3ì›” 1ì¼)
            generateDayView();
            console.log('âœ… ì¼ë³„ ë·° ìƒì„± ì™„ë£Œ!');
            
            // 5. ì´ˆê¸° ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ í‘œì‹œ ë° ë‚ ì§œ ì—…ë°ì´íŠ¸ (ì£¼ë³„ ë·°ê°€ ê¸°ë³¸)
            document.getElementById('prev-btn').style.display = 'block';
            document.getElementById('next-btn').style.display = 'block';
            const startDate = new Date(currentWeekDates[0]);
            const endDate = new Date(currentWeekDates[4]);
            const startMonth = startDate.getMonth() + 1;
            const startDay = startDate.getDate();
            const endMonth = endDate.getMonth() + 1;
            const endDay = endDate.getDate();
            document.getElementById('current-date-display').textContent = `${startMonth}/${startDay} - ${endMonth}/${endDay}`;
            
            console.log('ğŸ‰ ëª¨ë“  ë·° ì´ˆê¸°í™” ì™„ë£Œ!');
        });
    </script>
</body>
</html>