# Lego 프로젝트 - AI 기반 프로젝트 자원 관리 시스템

## 프로젝트 개요
- **목표**: 프로젝트 대/중/소분류와 사원별 담당 직무를 시각화하고, AI를 통해 업무를 자동 분류 및 배분하는 캘린더 기반의 자원 관리 시스템
- **핵심 가치**: 단순 투두리스트가 아닌, '시간 블록(Time-Block)' 중심의 자원 배분 현황 시각화

## 핵심 비즈니스 룰

### 1. 프로젝트 및 테스크 구조
- **프로젝트**: 사전에 정의된 테스크(Task)의 집합
- **테스크**: 대분류 - 중분류 - 소분류로 계층적 구조를 가짐
- **기준 시간 (블록)**: 각 테스크에 사전에 할당된 표준 작업 시간
  - 하나의 프로젝트 전체 기준 시간 = 모든 테스크 기준 시간의 합
  - 이 기준 시간을 "블록(Block)"이라고 표현

### 2. 테스크 할당 규칙
- **블록 분할**: 하나의 테스크(블록)를 여러 팀원이 시간 단위로 쪼개서 가져갈 수 있음
  - 예: 16시간 "개발" 테스크 → 팀원 A(4시간) + 팀원 B(12시간)
- **날짜 분할**: 한 팀원이 가져간 테스크를 여러 날에 걸쳐 쪼개서 수행 가능
  - 예: 팀원 B의 12시간 → 6시간(월요일) + 6시간(화요일)
- **유연한 역할**: 개인은 소속 팀에 관계없이 다양한 카테고리(소분류)의 작업 수행 가능
  - 예: 개발팀 소속이지만 디자인, 기획 작업도 가능

### 3. 시각화 규칙

#### 색상 표시
- **기준**: 소분류(Sub-category)를 기준으로 색상 할당
- **일관성**: 같은 소분류는 항상 같은 색상으로 표시
- **테스크 식별**: task_id로 동일 테스크 여부 판단

#### 월별 뷰 (Month View)
- **긴 바 형태**: 같은 task_id + 같은 user + 연속된 날짜 → 하나의 긴 바로 표시
  - 예: 김철수의 "DB 설계" (3/1-3/2) → 2일에 걸친 하나의 긴 바
- **분리 표시**: user가 다르거나, 날짜가 불연속이면 별도 바로 표시
- **레이어 관리**: 같은 user의 여러 테스크가 겹치면 레이어를 나눠 세로로 배치

#### 주별/일별 뷰 (Week/Day View)
- **일별 독립**: 같은 테스크라도 날짜가 다르면 별도의 독립적인 블록으로 표시
- **시간대 연결**: 같은 날 내에서 연속된 시간대는 하나의 블록으로 연결
- **컬럼 분할**: 동일 시간대에 여러 테스크가 겹치면 셀을 세로로 컬럼 분할하여 표시
- **툴팁**: 모든 시간대 블록에 호버 시 테스크 상세 정보 표시

### 4. 데이터 구조

#### TASKS (테스크 정의)
```javascript
{
  'task-001': {
    taskId: 'task-001',
    title: '테스크명',
    category: 'category-key',  // 소분류 키
    standardHours: 16,          // 기준 시간 (블록)
    // ... 기타 메타데이터
  }
}
```

#### TASK_ASSIGNMENTS (할당)
```javascript
[
  {
    taskId: 'task-001',
    user: 'user-kim',
    startDate: '2023-03-01',
    endDate: '2023-03-02',
    startTime: '09:00',
    endTime: '18:00',
    assignedHours: 8  // 이 할당에 대한 시간
  }
]
```

#### CATEGORIES (소분류)
```javascript
{
  'planning': {
    name: '기획',
    color: 'blue',
    colorCode: '#3b82f6'
  }
}
```

### 5. AI 자동화
- **엑셀 업로드**: 대분류, 중분류, 소분류, 작업 시간, 비고 포함
- **자동 카테고리징**: '비고' 필드를 사내 LLM(RAG)이 분석하여 소분류 자동 분류
- **충돌 감지**: 새 일정 투입 시 기존 일정과 충돌 시 AI가 조정안 제안

### 6. UI/UX 요구사항

#### 레이아웃
- 3단 구성: Header / Central Calendar / Right Sidebar
- 시간 단위: 1시간 블록
- 뷰 전환: Month, Week, Day

#### 스타일 가이드
- Background: `#f4f6f8`
- Card UI: 하얀 배경, 둥근 모서리 12px
- Task Blocks: 파스텔 톤 배경 + 왼쪽 4px solid 테두리

#### 필터링
- 우측 사이드바: Team > Member 트리 구조
- 양방향 체크박스 동기화
- 체크된 인원만 실시간 렌더링

### 7. 기술 스택
- Frontend: React.js / Next.js (Zustand or Redux)
- Calendar: FullCalendar.io or Custom Grid
- Backend: Python FastAPI
- AI: Private LLM (Llama 3 / Mistral), LangChain, RAG
- Database: PostgreSQL

## 개발 시 주의사항
1. 모든 시간 계산은 1시간 단위 기준
2. task_id를 기준으로 동일 테스크 판단
3. 월별 뷰와 주별/일별 뷰의 렌더링 로직이 다름에 유의
4. 색상은 항상 소분류(category) 기준
5. 사용자는 팀 소속과 무관하게 다양한 카테고리 작업 수행 가능

